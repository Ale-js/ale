/*! Ale.js JavaScript Framework
 * Version: 1.0-Beta.1
 * (c) 2018 Dong Yingxuan (Bill Dong)
 * Released under the MIT License
 */
(function(k,m){var l="1.0-Beta.1",d=[],b=[],n=[],i={html:false,diff:true};k.Ale=function(s,r){if(typeof s!=="string"||!c(r)){throw"Ale.js: Wrong type was used when creating component objects!"}if(r.template===undefined){throw"Ale.js: No template or imports is added when creating a component object!"}if(d[s]!==undefined){throw"Ale.js: This component has been created!"}r.life=c(r.life)?r.life:{};if(!Array.isArray(r.imports)){r.type=1;d[s]=r}else{r.type=2;r.template=[r.template];var q,u={};for(var t=0;t<r.imports.length;t++){q=d[r.imports[t]];if(q===undefined){throw"Ale.js: The imported component is not created!"}if(q.type===1){r.template.push(q.template)}else{r.template=r.template.concat(q.template);r.imports=r.imports.concat(q.imports)}if(c(q.data)){for(var p in q.data){u[p]=q.data[p]}}}r.data=c(r.data)?r.data:{};for(var t in r.data){u[t]=r.data[t]}r.data=u;d[s]=r}};Ale.render=function(q,p){var t=h(d[q]);if(t===undefined){throw"Ale.js: This component has not been created yet!"}if(typeof p.el!=="string"){throw"Ale.js: The type of the el should be a string!"}if(typeof t.life.using==="function"){t.life.using()}if(c(p.debug)){t.debug=p.debug}if(t.type===1){if(!c(t.data)){t.data={}}if(c(p.data)){for(var r in p.data){t.data[r]=p.data[r]}}return new j(p.el,t)}else{var s=t.template,u="";return new j(p.el,t)}};Ale.config=function(q,r){if(c(q)){for(var p in q){i[p]=q[p]}}else{if(typeof q==="string"&&r!==undefined){i[q]=r}else{throw"Ale.js: The parameter type is wrong when calling the config function!"}}};Ale.use=function(p){if(typeof p.name!=="string"||typeof p.install!=="function"){throw"Ale.js: Some fields were not added when the plugin was registered!"}if(b[p.name]!==undefined){throw"Ale.js: This plugin has been registered!"}b[p.name]=p.name;p.install()};Ale.filter=function(p){if(typeof p!=="function"&&!Array.isArray(p)){throw"Ale.js: You need to pass in a function or array when adding a filter!"}if(typeof p==="function"){n.push(p)}else{if(Array.isArray(p)){n=n.concat(p)}}};Ale.version=l;function j(v,q){this.el=v;this.nodeList=m.querySelectorAll(this.el);this.config=q;this.template=q.template;this.data=q.data;this.life=q.life;this.type=q.type;this.imports=q.imports;this.debug=q.debug;this.methods=c(q.methods)?q.methods:{};for(var r in this.data){this.data[r]=f(this.data[r])}var u=this.template;if(this.type===1){if(typeof u==="function"){u=a(u,this.data)()}}else{var w=u[0],t;if(typeof w==="function"){w=a(w,this.data)()}for(var r=1;r<u.length;r++){t=new RegExp("<"+this.imports[r-1]+"/>","g");if(typeof u[r]==="function"){w=w.replace(t,a(u[r],this.data)())}else{w=w.replace(t,u[r])}}u=w}this.life=o(this.life,this);var s=h(this.data);(function(D,C,A,G,B,F,z,E,x,y){Object.defineProperty(D,"data",{set:function(L){if(c(y)&&typeof y.setter==="function"){y.setter(L)}for(var H in L){s[H]=f(L[H])}if(typeof z==="function"){z()}if(E===1){var J=typeof G==="function"?a(G,s)():G,K=m.createElement("div");for(var H=0;H<n.length;H++){J=n[H](J)}K.innerHTML=J;if(typeof F==="function"){F()}for(var H=0;H<B.length;H++){e(K.childNodes,B[H].childNodes,B[H],J);g(B[H],C,A)}}else{var J=G[0],I,K=m.createElement("div");if(typeof J==="function"){J=a(J,C)()}for(var H=1;H<G.length;H++){I=new RegExp("<"+x[H-1]+"/>","g");if(typeof G[H]==="function"){J=J.replace(I,a(G[H],s)())}else{J=J.replace(I,G[H])}}for(var H=0;H<n.length;H++){J=n[H](J)}K.innerHTML=J;if(typeof F==="function"){F()}for(var H=0;H<B.length;H++){e(K.childNodes,B[H].childNodes,B[H],J);g(B[H],C)}}},get:function(){if(c(y)&&typeof y.getter==="function"){y.getter(C)}return C}})})(this,this.data,this.methods,this.template,this.nodeList,this.life.rendering,this.life.updating,this.type,this.imports,this.debug);for(var r in this.data){(function(D,C,A,G,B,F,z,E,x,y){Object.defineProperty(C,D,{set:function(L){if(c(y)&&typeof y.setter==="function"){y.setter(L)}s[D]=f(L);if(typeof z==="function"){z()}if(E===1){var J=typeof G==="function"?a(G,s)():G,K=m.createElement("div");for(var H=0;H<n.length;H++){J=n[H](J)}K.innerHTML=J;if(typeof F==="function"){F()}for(var H=0;H<B.length;H++){e(K.childNodes,B[H].childNodes,B[H],J);g(B[H],C,A)}}else{var J=G[0],I,K=m.createElement("div");if(typeof J==="function"){J=a(J,C)()}for(var H=1;H<G.length;H++){I=new RegExp("<"+x[H-1]+"/>","g");if(typeof G[H]==="function"){J=J.replace(I,a(G[H],s)())}else{J=J.replace(I,G[H])}}for(var H=0;H<n.length;H++){J=n[H](J)}K.innerHTML=J;if(typeof F==="function"){F()}for(var H=0;H<B.length;H++){e(K.childNodes,B[H].childNodes,B[H],J);g(B[H],C,A)}}},get:function(){if(c(y)&&typeof y.getter==="function"){y.getter(s[D])}return s[D]}})})(r,this.data,this.methods,this.template,this.nodeList,this.life.rendering,this.life.updating,this.type,this.imports,this.debug)}if(typeof this.life.rendering==="function"){this.life.rendering()}for(var p=0;p<n.length;p++){u=n[p](u)}for(var r=0;r<this.nodeList.length;r++){this.nodeList[r].innerHTML=u;g(this.nodeList[r],this.data,this.methods)}if(typeof this.life.mounting==="function"){this.life.mounting()}}j.prototype.destroy=function(){for(var p=0;p<this.nodeList.length;p++){this.nodeList[p].innerHTML=""}if(typeof this.life.unmounting==="function"){this.life.unmounting()}var q=this.life.destroy;for(var p in this.data){(function(r,s){Object.defineProperty(s,r,{set:function(){},get:function(){return undefined}})})(p,this.data)}for(var p in this){this[p]=undefined}if(typeof q==="function"){q()}};function e(u,s,v,t){if(!i.diff){v.innerHTML=t}if(u.length===0){v.innerHTML="";return}var p=0;for(var r=0;r<u.length;r++){p=r;while(u[p+1]===undefined&&s[p+1]!==undefined){s[p+1].remove()}if(s[r]===undefined){v.appendChild(u[r].cloneNode(true))}else{if(u[r].nodeName==="#text"){if(s[r].nodeName!=="#text"){s[r].innerHTML=u[r].nodeValue}else{if(u[r].nodeValue!==s[r].nodeValue){s[r].nodeValue=u[r].nodeValue}}}else{if(s[r].nodeName!=="#text"){if(s[r].tagName!==u[r].tagName||s[r].getAttribute("id")!==u[r].getAttribute("id")||s[r].getAttribute("class")!==u[r].getAttribute("class")||s[r].getAttribute("name")!==u[r].getAttribute("name")){var q=u[r].cloneNode(true);v.replaceChild(q,s[r])}}if(u[r].childNodes.length>0){e(u[r].childNodes,s[r].childNodes,v.childNodes[r])}else{if(s[r].childNodes.length>0){s[r].innerHTML=""}}}}}}function f(p){if(typeof p==="string"&&!i.html){p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}return p}function o(r,q){for(var p in r){r[p]=a(r[p],q)}return r}function g(r,s,p){r.data=s;r.methods=p;if(r.children.length>0){for(var q=0;q<r.children.length;q++){g(r.children[q],s,p)}}}function h(r){if(r===null){return null}if(typeof r!=="object"){return r}if(r.constructor===Date){return new Date(r)}if(r.constructor===RegExp){return new RegExp(r)}var p=new r.constructor();for(var q in r){if(r.hasOwnProperty(q)){var s=r[q];p[q]=typeof s==="object"?arguments.callee(s):s}}return p}function c(s){var r,q,p=function(){return{}};if(!s||p().toString.call(s)!=="[object Object]"){return false}r=Object.getPrototypeOf(s);if(!r){return true}q=p.hasOwnProperty.call(r,"constructor")&&r.constructor;return typeof q==="function"&&p.hasOwnProperty.toString(q)===p.hasOwnProperty.toString(Object)}function a(r,p){function q(t){var s=arguments.length;return s?s>1?r.apply(p,arguments):r.call(p,t):r.call(p)}q._length=r.length;return q}})(window,document);
